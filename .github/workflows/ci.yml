name: CI

on:
  push:
    branches: [main]
  pull_request:
  workflow_dispatch:
    inputs:
      python-versions:
        description: 'Python versions (JSON array)'
        required: false
        default: '["3.9", "3.10", "3.11", "3.12"]'
      arch:
        description: 'Architecture'
        required: false
        default: 'x86_64'
        type: choice
        options:
          - x86_64
          - aarch64

jobs:
  test:
    uses: ./.github/workflows/_test-source.yml
    with:
      python-versions: ${{ inputs.python-versions || '["3.12"]' }}
      arch: ${{ inputs.arch || 'x86_64' }}
